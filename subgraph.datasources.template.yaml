specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - name: Comptroller
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{comptroller.address}}"
      abi: Comptroller
      startBlock: {{comptroller.startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappingForComptroller.ts
      entities:
        - Comptroller
      abis:
        - name: Comptroller
          file: ./abis/v3_1_0/abis/Comptroller.json
      eventHandlers:
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: BalanceDripActivated(indexed address,indexed address,indexed address,uint256)
          handler: handleBalanceDripActivated
        - event: BalanceDripDeactivated(indexed address,indexed address,indexed address)
          handler: handleBalanceDripDeactivated
        - event: BalanceDripRateSet(indexed address,indexed address,indexed address,uint256)
          handler: handleBalanceDripRateSet
        - event: BalanceDripDripped(indexed address,indexed address,indexed address,address,uint256)
          handler: handleBalanceDripDripped
        - event: VolumeDripActivated(indexed address,indexed address,indexed address,bool,uint256,uint256)
          handler: handleVolumeDripActivated
        - event: VolumeDripDeactivated(indexed address,indexed address,indexed address,bool)
          handler: handleVolumeDripDeactivated
        - event: VolumeDripSet(indexed address,indexed address,indexed address,bool,uint256,uint256)
          handler: handleVolumeDripSet
        - event: VolumeDripPeriodStarted(indexed address,indexed address,indexed address,bool,uint32,uint256,uint256)
          handler: handleVolumeDripPeriodStarted
        - event: VolumeDripPeriodEnded(indexed address,indexed address,indexed address,bool,uint32,uint256,uint256)
          handler: handleVolumeDripPeriodEnded
        - event: VolumeDripDripped(indexed address,indexed address,indexed address,bool,address,uint256)
          handler: handleVolumeDripDripped


  {{#sablierManager}}
  - name: SablierManager
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: SablierManager
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - PrizePool
      abis:
        - name: SablierManager 
          file: ./node_modules/@pooltogether/pooltogether-contracts/abis/SablierManager.json
      eventHandlers:
        - event: SablierStreamCreated(indexed uint256,indexed address)
          handler: handleSablierStreamCreated
        - event: SablierStreamCancelled(indexed uint256)
          handler: handleSablierStreamCancelled
      file: ./src/mappingForSablierStreamManager.ts

  {{/sablierManager}}


  {{#compoundPrizePoolProxyFactory_v3_0_1}}
  - name: CompoundPrizePoolProxyFactory_v3_0_1
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: CompoundPrizePoolProxyFactory_v3_0_1
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - CompoundPrizePool
      abis:
        - name: CompoundPrizePoolProxyFactory_v3_0_1 
          file: ./abis/v3_1_0/abis/CompoundPrizePoolProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForCompoundPrizePoolProxyFactory_v3_0_1.ts

  {{/compoundPrizePoolProxyFactory_v3_0_1}}

  {{#compoundPrizePoolProxyFactory_v3_1_0}}
  - name: CompoundPrizePoolProxyFactory_v3_1_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: CompoundPrizePoolProxyFactory_v3_2_0
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - CompoundPrizePool
      abis:
        - name: CompoundPrizePoolProxyFactory_v3_2_0
          file: ./abis/v3_2_0/abis/CompoundPrizePoolProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForCompoundPrizePoolProxyFactory_v3_1_0.ts

  {{/compoundPrizePoolProxyFactory_v3_1_0}}

    {{#compoundPrizePoolProxyFactory_v3_3_2}} # doesnt seem to be a way to add to the above
  - name: CompoundPrizePoolProxyFactory_v3_3_2
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: CompoundPrizePoolProxyFactory_v3_3_2
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - CompoundPrizePool
      abis:
        - name: CompoundPrizePoolProxyFactory_v3_3_2
          file: ./node_modules/@pooltogether/pooltogether-contracts/abis/CompoundPrizePoolProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForCompoundPrizePoolProxyFactory_v3_3_2.ts #using existing ProxyCreated event since the ProxyCreated event is the same -- can we join mappingForCompoundPrizePoolFactories together for all versions?

  {{/compoundPrizePoolProxyFactory_v3_3_2}}

    {{#yieldSourcePrizePoolProxyFactory_v3_3_2}} # doesnt seem to be a way to add to the above
  - name: YieldSourcePrizePoolProxyFactory_v3_3_2
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: YieldSourcePrizePoolProxyFactory_v3_3_2
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - YieldSourcePrizePool
      abis:
        - name: YieldSourcePrizePoolProxyFactory_v3_3_2
          file: ./node_modules/@pooltogether/pooltogether-contracts/abis/YieldSourcePrizePoolProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForYieldSourcePrizePoolProxyFactory_v3.ts #using existing ProxyCreated event
  {{/yieldSourcePrizePoolProxyFactory_v3_3_2}}



  {{#singleRandomWinnerProxyFactory_v3_1_0}}
  - name: SingleRandomWinnerProxyFactory_v3_1_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: SingleRandomWinnerProxyFactory
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - SingleRandomWinnerPrizeStrategy
      abis:
        - name: PrizePool
          file: ./abis/v3_1_0/abis/PrizePool.json
        - name: SingleRandomWinner
          file: ./abis/v3_1_0/abis/SingleRandomWinner.json
        - name: SingleRandomWinnerProxyFactory
          file: ./abis/v3_1_0/abis/SingleRandomWinnerProxyFactory.json
        - name: ControlledToken
          file: ./abis/v3_1_0/abis/ControlledToken.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForSingleRandomWinnerProxyFactory.ts
  {{/singleRandomWinnerProxyFactory_v3_1_0}}

  {{#singleRandomWinnerProxyFactory_v3_0_1}}
  - name: SingleRandomWinnerProxyFactory_v3_0_1
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: SingleRandomWinnerProxyFactory
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - SingleRandomWinnerPrizeStrategy
      abis:
        - name: PrizePool
          file: ./abis/v3_1_0/abis/PrizePool.json
        - name: SingleRandomWinner
          file: ./abis/v3_1_0/abis/SingleRandomWinner.json
        - name: SingleRandomWinnerProxyFactory
          file: ./abis/v3_1_0/abis/SingleRandomWinnerProxyFactory.json
        - name: ControlledToken
          file: ./abis/v3_1_0/abis/ControlledToken.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForSingleRandomWinnerProxyFactory.ts
  {{/singleRandomWinnerProxyFactory_v3_0_1}}

  {{#multipleWinnersProxyFactory_v3_1_0}}
  - name: MultipleWinnersProxyFactory_v3_1_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: MultipleWinnersProxyFactory_v3_1_0
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - MultipleWinnersPrizeStrategy
      abis:
        - name: MultipleWinnersProxyFactory_v3_1_0
          file: ./abis/v3_1_0/abis/MultipleWinnersProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleMultipleWinnersCreated
      file: ./src/mappingForMultipleWinnersProxyFactory_v3_1_0.ts
  {{/multipleWinnersProxyFactory_v3_1_0}}

  {{#multipleWinnersProxyFactory_v3_2_0}}
  - name: MultipleWinnersProxyFactory_v3_2_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: MultipleWinnersProxyFactory_v3_1_0
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - MultipleWinnersPrizeStrategy
      abis:
        - name: MultipleWinnersProxyFactory_v3_1_0
          file: ./abis/v3_1_0/abis/MultipleWinnersProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleMultipleWinnersCreated
      file: ./src/mappingForMultipleWinnersProxyFactory_v3_2_0.ts
  {{/multipleWinnersProxyFactory_v3_2_0}}


    {{#multipleWinnersProxyFactory_v3_3_2}}
  - name: MultipleWinnersProxyFactory_v3_3_2
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: MultipleWinnersProxyFactory_v3_3_2
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - MultipleWinnersPrizeStrategy
      abis:
        - name: MultipleWinnersProxyFactory_v3_3_2
          file: ./abis/v3_1_0/abis/MultipleWinnersProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleMultipleWinnersCreated
      file: ./src/mappingForMultipleWinnersProxyFactory_v3_3_2.ts
  {{/multipleWinnersProxyFactory_v3_3_2}}



  {{#stakePrizePoolProxyFactory_v3_1_0}}
  - name: StakePrizePoolProxyFactory_v3_1_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: StakePrizePoolProxyFactory
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - StakePrizePool
      abis:
        - name: StakePrizePoolProxyFactory
          file: ./abis/v3_1_0/abis/StakePrizePoolProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleStakePrizePoolCreated
      file: ./src/mappingForStakePrizePoolProxyFactory_v3.ts
  {{/stakePrizePoolProxyFactory_v3_1_0}}

    {{#stakePrizePoolProxyFactory_v3_2_0}}
  - name: StakePrizePoolProxyFactory_v3_2_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: StakePrizePoolProxyFactory
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - StakePrizePool
      abis:
        - name: StakePrizePoolProxyFactory
          file: ./abis/v3_1_0/abis/StakePrizePoolProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleStakePrizePoolCreated
      file: ./src/mappingForStakePrizePoolProxyFactory_v3.ts
  {{/stakePrizePoolProxyFactory_v3_2_0}}


  {{#stakePrizePoolProxyFactory_v3_3_2}}
  - name: StakePrizePoolProxyFactory_v3_3_2
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: StakePrizePoolProxyFactory
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - StakePrizePool
      abis:
        - name: StakePrizePoolProxyFactory
          file: ./node_modules/@pooltogether/pooltogether-contracts/abis/StakePrizePoolProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleStakePrizePoolCreated
      file: ./src/mappingForStakePrizePoolProxyFactory_v3.ts
  {{/stakePrizePoolProxyFactory_v3_3_2}}



  {{#controlledTokenProxyFactory_v3_0_1}}
  - name: ControlledTokenProxyFactory_v3_0_1
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: ControlledTokenProxyFactory_v3_0_1
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - ControlledToken
      abis:
        - name: ControlledTokenProxyFactory_v3_0_1
          file: ./abis/v3_1_0/abis/ControlledTokenProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForControlledTokenProxyFactory_v3.ts
  {{/controlledTokenProxyFactory_v3_0_1}}

  {{#controlledTokenProxyFactory_v3_1_0}}
  - name: ControlledTokenProxyFactory_v3_1_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: ControlledTokenProxyFactory_v3_1_0
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - ControlledToken
      abis:
        - name: ControlledTokenProxyFactory_v3_1_0
          file: ./abis/v3_1_0/abis/ControlledTokenProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForControlledTokenProxyFactory_v3.ts
  {{/controlledTokenProxyFactory_v3_1_0}}


    {{#controlledTokenProxyFactory_v3_3_2}}
  - name: ControlledTokenProxyFactory_v3_3_2
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: ControlledTokenProxyFactory_v3_3_2
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - ControlledToken
      abis:
        - name: ControlledTokenProxyFactory_v3_3_2
          file: ./node_modules/@pooltogether/pooltogether-contracts/abis/ControlledTokenProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForControlledTokenProxyFactory_v3.ts
  {{/controlledTokenProxyFactory_v3_3_2}}

  {{#ticketProxyFactory_v3_0_1}}
  - name: TicketProxyFactory_v3_0_1
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: TicketProxyFactory_v3_0_1
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - ControlledToken
      abis:
        - name: TicketProxyFactory_v3_0_1
          file: ./abis/v3_1_0/abis/TicketProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForTicketProxyFactory_v3.ts
  {{/ticketProxyFactory_v3_0_1}}

  {{#ticketProxyFactory_v3_1_0}}
  - name: TicketProxyFactory_v3_1_0
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: TicketProxyFactory_v3_1_0
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - ControlledToken
      abis:
        - name: TicketProxyFactory_v3_1_0
          file: ./abis/v3_1_0/abis/TicketProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForTicketProxyFactory_v3.ts
  {{/ticketProxyFactory_v3_1_0}}

    {{#ticketProxyFactory_v3_3_2}}
  - name: TicketProxyFactory_v3_3_2
    kind: ethereum/contract
    network: {{network}}
    source:
      address: "{{address}}"
      abi: TicketProxyFactory_v3_3_2
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - ControlledToken
      abis:
        - name: TicketProxyFactory_v3_3_2
          file: ./node_modules/@pooltogether/pooltogether-contracts/abis/TicketProxyFactory.json
      eventHandlers:
        - event: ProxyCreated(address)
          handler: handleProxyCreated
      file: ./src/mappingForTicketProxyFactory_v3.ts
  {{/ticketProxyFactory_v3_3_2}}


